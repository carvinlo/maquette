{"version":3,"sources":["maquette.js","../../../../src/maquette.ts"],"names":["Object","defineProperty","exports","value","NAMESPACE_W3","NAMESPACE_SVG","NAMESPACE_XLINK","emptyArray","extend","base","overrides","result","keys","forEach","key","same","vnode1","vnode2","vnodeSelector","properties","bind","toTextVNode","data","undefined","children","text","toString","domNode","flattenInto","parentSelector","insertions","main","mainIndex","i","length","item","Array","isArray","hasOwnProperty","splice","flatten","index","child","missingTransition","Error","DEFAULT_PROJECTION_OPTIONS","namespace","eventHandlerInterceptor","styleApplyer","styleName","style","transitions","enter","exit","applyDefaultProjectionOptions","projectorOptions","checkStyleValue","styleValue","setProperties","projectionOptions","propNames","propCount","_loop_1","propName","propValue","split","token","classList","add","classNames","classNameCount","j","className","styleNames","styleCount","type","lastIndexOf","oldPropValue","evt","apply","target","setAttributeNS","setAttribute","updateProperties","previousProperties","propertiesUpdated","previousValue","on","previousOn","remove","newStyleValue","oldStyleValue","domValue","removeAttribute","findIndexOfChild","sameAs","start","nodeAdded","vNode","enterAnimation","nodeToRemove","exitAnimation","pointerEvents","removeDomNode","parentNode","removeChild","checkDistinguishable","childNodes","indexToCheck","parentVNode","operation","childNode","node","createDom","updateDom","updateChildren","vnode","oldChildren","newChildren","oldChildrenLength","newChildrenLength","oldIndex","newIndex","textUpdated","oldChild","newChild","findOldIndex","addChildren","initPropertiesAndChildren","textContent","afterCreate","insertBefore","c","found","doc","ownerDocument","createTextNode","appendChild","charAt","slice","id","createElementNS","createElement","previous","updated","newVNode","replaceChild","firstChild","afterUpdate","updateAnimation","createProjection","update","updatedVnode","h","selector","dom","create","document","append","beforeNode","merge","element","replace","createCache","cachedInputs","cachedOutcome","invalidate","inputs","calculation","createMapping","getSourceKey","createResult","updateResult","results","map","newSources","newKeys","oldTargets","source","sourceKey","searchIndex","createProjector","projector","propertyName","eventHandler","scheduleRender","arguments","renderCompleted","scheduled","stopped","projections","renderFunctions","doRender","renderNow","requestAnimationFrame","stop","cancelAnimationFrame","resume","renderMaquetteFunction","push","detach"],"mappings":"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","file":"maquette.js","sourcesContent":["\"use strict\";\n// Comment that is displayed in the API documentation for the maquette module:\n/**\n * Welcome to the API documentation of the **maquette** library.\n *\n * [[http://maquettejs.org/|To the maquette homepage]]\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar NAMESPACE_W3 = 'http://www.w3.org/';\nvar NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nvar NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\n// Utilities\nvar emptyArray = [];\nvar extend = function (base, overrides) {\n    var result = {};\n    Object.keys(base).forEach(function (key) {\n        result[key] = base[key];\n    });\n    if (overrides) {\n        Object.keys(overrides).forEach(function (key) {\n            result[key] = overrides[key];\n        });\n    }\n    return result;\n};\n// Hyperscript helper functions\nvar same = function (vnode1, vnode2) {\n    if (vnode1.vnodeSelector !== vnode2.vnodeSelector) {\n        return false;\n    }\n    if (vnode1.properties && vnode2.properties) {\n        if (vnode1.properties.key !== vnode2.properties.key) {\n            return false;\n        }\n        return vnode1.properties.bind === vnode2.properties.bind;\n    }\n    return !vnode1.properties && !vnode2.properties;\n};\nvar toTextVNode = function (data) {\n    return {\n        vnodeSelector: '',\n        properties: undefined,\n        children: undefined,\n        text: data.toString(),\n        domNode: null\n    };\n};\nvar flattenInto = function (parentSelector, insertions, main, mainIndex) {\n    for (var i = 0; i < insertions.length; i++) {\n        var item = insertions[i];\n        if (Array.isArray(item)) {\n            mainIndex = flattenInto(parentSelector, item, main, mainIndex);\n        }\n        else {\n            if (item !== null && item !== undefined) {\n                if (!item.hasOwnProperty(\"vnodeSelector\")) {\n                    item = toTextVNode(item);\n                }\n                main.splice(mainIndex, 0, item);\n                mainIndex++;\n            }\n        }\n    }\n    return mainIndex;\n};\n// removes nulls, flattens embedded arrays\nvar flatten = function (parentSelector, children) {\n    var index = 0;\n    while (index < children.length) {\n        var child = children[index];\n        if (child === null || child === undefined) {\n            children.splice(index, 1);\n        }\n        else if (Array.isArray(child)) {\n            children.splice(index, 1);\n            index = flattenInto(parentSelector, child, children, index);\n        }\n        else if (child.hasOwnProperty(\"vnodeSelector\")) {\n            index++;\n        }\n        else {\n            children[index] = toTextVNode(child);\n            index++;\n        }\n    }\n};\n// Render helper functions\nvar missingTransition = function () {\n    throw new Error('Provide a transitions object to the projectionOptions to do animations');\n};\nvar DEFAULT_PROJECTION_OPTIONS = {\n    namespace: undefined,\n    eventHandlerInterceptor: undefined,\n    styleApplyer: function (domNode, styleName, value) {\n        // Provides a hook to add vendor prefixes for browsers that still need it.\n        domNode.style[styleName] = value;\n    },\n    transitions: {\n        enter: missingTransition,\n        exit: missingTransition\n    }\n};\nvar applyDefaultProjectionOptions = function (projectorOptions) {\n    return extend(DEFAULT_PROJECTION_OPTIONS, projectorOptions);\n};\nvar checkStyleValue = function (styleValue) {\n    if (typeof styleValue !== 'string') {\n        throw new Error('Style values must be strings');\n    }\n};\nvar setProperties = function (domNode, properties, projectionOptions) {\n    if (!properties) {\n        return;\n    }\n    var eventHandlerInterceptor = projectionOptions.eventHandlerInterceptor;\n    var propNames = Object.keys(properties);\n    var propCount = propNames.length;\n    var _loop_1 = function (i) {\n        var propName = propNames[i];\n        /* tslint:disable:no-var-keyword: edge case */\n        var propValue = properties[propName];\n        /* tslint:enable:no-var-keyword */\n        if (propName === 'className') {\n            throw new Error('Property \"className\" is not supported, use \"class\".');\n        }\n        else if (propName === 'class') {\n            propValue.split(/\\s+/).forEach(function (token) { return domNode.classList.add(token); });\n        }\n        else if (propName === 'classes') {\n            // object with string keys and boolean values\n            var classNames = Object.keys(propValue);\n            var classNameCount = classNames.length;\n            for (var j = 0; j < classNameCount; j++) {\n                var className = classNames[j];\n                if (propValue[className]) {\n                    domNode.classList.add(className);\n                }\n            }\n        }\n        else if (propName === 'styles') {\n            // object with string keys and string (!) values\n            var styleNames = Object.keys(propValue);\n            var styleCount = styleNames.length;\n            for (var j = 0; j < styleCount; j++) {\n                var styleName = styleNames[j];\n                var styleValue = propValue[styleName];\n                if (styleValue) {\n                    checkStyleValue(styleValue);\n                    projectionOptions.styleApplyer(domNode, styleName, styleValue);\n                }\n            }\n        }\n        else if (propName !== 'key' && propValue !== null && propValue !== undefined) {\n            var type = typeof propValue;\n            if (type === 'function') {\n                if (propName.lastIndexOf('on', 0) === 0) {\n                    if (eventHandlerInterceptor) {\n                        propValue = eventHandlerInterceptor(propName, propValue, domNode, properties); // intercept eventhandlers\n                    }\n                    if (propName === 'oninput') {\n                        (function () {\n                            // record the evt.target.value, because IE and Edge sometimes do a requestAnimationFrame between changing value and running oninput\n                            var oldPropValue = propValue;\n                            propValue = function (evt) {\n                                oldPropValue.apply(this, [evt]);\n                                evt.target['oninput-value'] = evt.target.value; // may be HTMLTextAreaElement as well\n                            };\n                        }());\n                    }\n                    domNode[propName] = propValue;\n                }\n            }\n            else if (type === 'string' && propName !== 'value' && propName !== 'innerHTML') {\n                if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                    domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                }\n                else {\n                    domNode.setAttribute(propName, propValue);\n                }\n            }\n            else {\n                domNode[propName] = propValue;\n            }\n        }\n    };\n    for (var i = 0; i < propCount; i++) {\n        _loop_1(i);\n    }\n};\nvar updateProperties = function (domNode, previousProperties, properties, projectionOptions) {\n    if (!properties) {\n        return;\n    }\n    var propertiesUpdated = false;\n    var propNames = Object.keys(properties);\n    var propCount = propNames.length;\n    for (var i = 0; i < propCount; i++) {\n        var propName = propNames[i];\n        // assuming that properties will be nullified instead of missing is by design\n        var propValue = properties[propName];\n        var previousValue = previousProperties[propName];\n        if (propName === 'class') {\n            if (previousValue !== propValue) {\n                throw new Error('\"class\" property may not be updated. Use the \"classes\" property for conditional css classes.');\n            }\n        }\n        else if (propName === 'classes') {\n            var classList = domNode.classList;\n            var classNames = Object.keys(propValue);\n            var classNameCount = classNames.length;\n            for (var j = 0; j < classNameCount; j++) {\n                var className = classNames[j];\n                var on = !!propValue[className];\n                var previousOn = !!previousValue[className];\n                if (on === previousOn) {\n                    continue;\n                }\n                propertiesUpdated = true;\n                if (on) {\n                    classList.add(className);\n                }\n                else {\n                    classList.remove(className);\n                }\n            }\n        }\n        else if (propName === 'styles') {\n            var styleNames = Object.keys(propValue);\n            var styleCount = styleNames.length;\n            for (var j = 0; j < styleCount; j++) {\n                var styleName = styleNames[j];\n                var newStyleValue = propValue[styleName];\n                var oldStyleValue = previousValue[styleName];\n                if (newStyleValue === oldStyleValue) {\n                    continue;\n                }\n                propertiesUpdated = true;\n                if (newStyleValue) {\n                    checkStyleValue(newStyleValue);\n                    projectionOptions.styleApplyer(domNode, styleName, newStyleValue);\n                }\n                else {\n                    projectionOptions.styleApplyer(domNode, styleName, '');\n                }\n            }\n        }\n        else {\n            if (!propValue && typeof previousValue === 'string') {\n                propValue = '';\n            }\n            if (propName === 'value') {\n                var domValue = domNode[propName];\n                if (domValue !== propValue // The 'value' in the DOM tree !== newValue\n                    && (domNode['oninput-value']\n                        ? domValue === domNode['oninput-value'] // If the last reported value to 'oninput' does not match domValue, do nothing and wait for oninput\n                        : propValue !== previousValue // Only update the value if the vdom changed\n                    )) {\n                    domNode[propName] = propValue; // Reset the value, even if the virtual DOM did not change\n                    domNode['oninput-value'] = undefined;\n                } // else do not update the domNode, otherwise the cursor position would be changed\n                if (propValue !== previousValue) {\n                    propertiesUpdated = true;\n                }\n            }\n            else if (propValue !== previousValue) {\n                var type = typeof propValue;\n                if (type === 'function') {\n                    throw new Error('Functions may not be updated on subsequent renders (property: ' + propName +\n                        '). Hint: declare event handler functions outside the render() function.');\n                }\n                if (type === 'string' && propName !== 'innerHTML') {\n                    if (projectionOptions.namespace === NAMESPACE_SVG && propName === 'href') {\n                        domNode.setAttributeNS(NAMESPACE_XLINK, propName, propValue);\n                    }\n                    else if (propName === 'role' && propValue === '') {\n                        domNode.removeAttribute(propName);\n                    }\n                    else {\n                        domNode.setAttribute(propName, propValue);\n                    }\n                }\n                else {\n                    if (domNode[propName] !== propValue) {\n                        domNode[propName] = propValue;\n                    }\n                }\n                propertiesUpdated = true;\n            }\n        }\n    }\n    return propertiesUpdated;\n};\nvar findIndexOfChild = function (children, sameAs, start) {\n    if (sameAs.vnodeSelector !== '') {\n        // Never scan for text-nodes\n        for (var i = start; i < children.length; i++) {\n            if (same(children[i], sameAs)) {\n                return i;\n            }\n        }\n    }\n    return -1;\n};\nvar nodeAdded = function (vNode, transitions) {\n    if (vNode.properties) {\n        var enterAnimation = vNode.properties.enterAnimation;\n        if (enterAnimation) {\n            if (typeof enterAnimation === 'function') {\n                enterAnimation(vNode.domNode, vNode.properties);\n            }\n            else {\n                transitions.enter(vNode.domNode, vNode.properties, enterAnimation);\n            }\n        }\n    }\n};\nvar nodeToRemove = function (vNode, transitions) {\n    var domNode = vNode.domNode;\n    if (vNode.properties) {\n        var exitAnimation = vNode.properties.exitAnimation;\n        if (exitAnimation) {\n            domNode.style.pointerEvents = 'none';\n            var removeDomNode = function () {\n                if (domNode.parentNode) {\n                    domNode.parentNode.removeChild(domNode);\n                }\n            };\n            if (typeof exitAnimation === 'function') {\n                exitAnimation(domNode, removeDomNode, vNode.properties);\n                return;\n            }\n            else {\n                transitions.exit(vNode.domNode, vNode.properties, exitAnimation, removeDomNode);\n                return;\n            }\n        }\n    }\n    if (domNode.parentNode) {\n        domNode.parentNode.removeChild(domNode);\n    }\n};\nvar checkDistinguishable = function (childNodes, indexToCheck, parentVNode, operation) {\n    var childNode = childNodes[indexToCheck];\n    if (childNode.vnodeSelector === '') {\n        return; // Text nodes need not be distinguishable\n    }\n    var properties = childNode.properties;\n    var key = properties ? (properties.key === undefined ? properties.bind : properties.key) : undefined;\n    if (!key) {\n        for (var i = 0; i < childNodes.length; i++) {\n            if (i !== indexToCheck) {\n                var node = childNodes[i];\n                if (same(node, childNode)) {\n                    if (operation === 'added') {\n                        throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' +\n                            'added, but there is now more than one. You must add unique key properties to make them distinguishable.');\n                    }\n                    else {\n                        throw new Error(parentVNode.vnodeSelector + ' had a ' + childNode.vnodeSelector + ' child ' +\n                            'removed, but there were more than one. You must add unique key properties to make them distinguishable.');\n                    }\n                }\n            }\n        }\n    }\n};\nvar createDom;\nvar updateDom;\nvar updateChildren = function (vnode, domNode, oldChildren, newChildren, projectionOptions) {\n    if (oldChildren === newChildren) {\n        return false;\n    }\n    oldChildren = oldChildren || emptyArray;\n    newChildren = newChildren || emptyArray;\n    var oldChildrenLength = oldChildren.length;\n    var newChildrenLength = newChildren.length;\n    var transitions = projectionOptions.transitions;\n    var oldIndex = 0;\n    var newIndex = 0;\n    var i;\n    var textUpdated = false;\n    while (newIndex < newChildrenLength) {\n        var oldChild = (oldIndex < oldChildrenLength) ? oldChildren[oldIndex] : undefined;\n        var newChild = newChildren[newIndex];\n        if (oldChild !== undefined && same(oldChild, newChild)) {\n            textUpdated = updateDom(oldChild, newChild, projectionOptions) || textUpdated;\n            oldIndex++;\n        }\n        else {\n            var findOldIndex = findIndexOfChild(oldChildren, newChild, oldIndex + 1);\n            if (findOldIndex >= 0) {\n                // Remove preceding missing children\n                for (i = oldIndex; i < findOldIndex; i++) {\n                    nodeToRemove(oldChildren[i], transitions);\n                    checkDistinguishable(oldChildren, i, vnode, 'removed');\n                }\n                textUpdated = updateDom(oldChildren[findOldIndex], newChild, projectionOptions) || textUpdated;\n                oldIndex = findOldIndex + 1;\n            }\n            else {\n                // New child\n                createDom(newChild, domNode, (oldIndex < oldChildrenLength) ? oldChildren[oldIndex].domNode : undefined, projectionOptions);\n                nodeAdded(newChild, transitions);\n                checkDistinguishable(newChildren, newIndex, vnode, 'added');\n            }\n        }\n        newIndex++;\n    }\n    if (oldChildrenLength > oldIndex) {\n        // Remove child fragments\n        for (i = oldIndex; i < oldChildrenLength; i++) {\n            nodeToRemove(oldChildren[i], transitions);\n            checkDistinguishable(oldChildren, i, vnode, 'removed');\n        }\n    }\n    return textUpdated;\n};\nvar addChildren = function (domNode, children, projectionOptions) {\n    if (!children) {\n        return;\n    }\n    for (var i = 0; i < children.length; i++) {\n        createDom(children[i], domNode, undefined, projectionOptions);\n    }\n};\nvar initPropertiesAndChildren = function (domNode, vnode, projectionOptions) {\n    addChildren(domNode, vnode.children, projectionOptions); // children before properties, needed for value property of <select>.\n    if (vnode.text) {\n        domNode.textContent = vnode.text;\n    }\n    setProperties(domNode, vnode.properties, projectionOptions);\n    if (vnode.properties && vnode.properties.afterCreate) {\n        vnode.properties.afterCreate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\n    }\n};\ncreateDom = function (vnode, parentNode, insertBefore, projectionOptions) {\n    var domNode, i, c, start = 0, type, found;\n    var vnodeSelector = vnode.vnodeSelector;\n    var doc = parentNode.ownerDocument;\n    if (vnodeSelector === '') {\n        domNode = vnode.domNode = doc.createTextNode(vnode.text);\n        if (insertBefore !== undefined) {\n            parentNode.insertBefore(domNode, insertBefore);\n        }\n        else {\n            parentNode.appendChild(domNode);\n        }\n    }\n    else {\n        for (i = 0; i <= vnodeSelector.length; ++i) {\n            c = vnodeSelector.charAt(i);\n            if (i === vnodeSelector.length || c === '.' || c === '#') {\n                type = vnodeSelector.charAt(start - 1);\n                found = vnodeSelector.slice(start, i);\n                if (type === '.') {\n                    domNode.classList.add(found);\n                }\n                else if (type === '#') {\n                    domNode.id = found;\n                }\n                else {\n                    if (found === 'svg') {\n                        projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n                    }\n                    if (projectionOptions.namespace !== undefined) {\n                        domNode = vnode.domNode = doc.createElementNS(projectionOptions.namespace, found);\n                    }\n                    else {\n                        domNode = vnode.domNode = (vnode.domNode || doc.createElement(found));\n                        if (found === 'input' && vnode.properties && vnode.properties.type !== undefined) {\n                            // IE8 and older don't support setting input type after the DOM Node has been added to the document\n                            domNode.setAttribute(\"type\", vnode.properties.type);\n                        }\n                    }\n                    if (insertBefore !== undefined) {\n                        parentNode.insertBefore(domNode, insertBefore);\n                    }\n                    else if (domNode.parentNode !== parentNode) {\n                        parentNode.appendChild(domNode);\n                    }\n                }\n                start = i + 1;\n            }\n        }\n        initPropertiesAndChildren(domNode, vnode, projectionOptions);\n    }\n};\nupdateDom = function (previous, vnode, projectionOptions) {\n    var domNode = previous.domNode;\n    var textUpdated = false;\n    if (previous === vnode) {\n        return false; // By contract, VNode objects may not be modified anymore after passing them to maquette\n    }\n    var updated = false;\n    if (vnode.vnodeSelector === '') {\n        if (vnode.text !== previous.text) {\n            var newVNode = domNode.ownerDocument.createTextNode(vnode.text);\n            domNode.parentNode.replaceChild(newVNode, domNode);\n            vnode.domNode = newVNode;\n            textUpdated = true;\n            return textUpdated;\n        }\n    }\n    else {\n        if (vnode.vnodeSelector.lastIndexOf('svg', 0) === 0) {\n            projectionOptions = extend(projectionOptions, { namespace: NAMESPACE_SVG });\n        }\n        if (previous.text !== vnode.text) {\n            updated = true;\n            if (vnode.text === undefined) {\n                domNode.removeChild(domNode.firstChild); // the only textnode presumably\n            }\n            else {\n                domNode.textContent = vnode.text;\n            }\n        }\n        updated = updateChildren(vnode, domNode, previous.children, vnode.children, projectionOptions) || updated;\n        updated = updateProperties(domNode, previous.properties, vnode.properties, projectionOptions) || updated;\n        if (vnode.properties && vnode.properties.afterUpdate) {\n            vnode.properties.afterUpdate.apply(vnode.properties.bind || vnode.properties, [domNode, projectionOptions, vnode.vnodeSelector, vnode.properties, vnode.children]);\n        }\n    }\n    if (updated && vnode.properties && vnode.properties.updateAnimation) {\n        vnode.properties.updateAnimation(domNode, vnode.properties, previous.properties);\n    }\n    vnode.domNode = previous.domNode;\n    return textUpdated;\n};\nvar createProjection = function (vnode, projectionOptions) {\n    return {\n        update: function (updatedVnode) {\n            if (vnode.vnodeSelector !== updatedVnode.vnodeSelector) {\n                throw new Error('The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)');\n            }\n            updateDom(vnode, updatedVnode, projectionOptions);\n            vnode = updatedVnode;\n        },\n        domNode: vnode.domNode\n    };\n};\n/**\n * The `h` function is used to create a virtual DOM node.\n * This function is largely inspired by the mercuryjs and mithril frameworks.\n * The `h` stands for (virtual) hyperscript.\n *\n * All possible method signatures of this function can be found in the [[H]] 'interface'.\n *\n * NOTE: There are {@link http://maquettejs.org/docs/rules.html|three basic rules} you should be aware of when updating the virtual DOM.\n */\nexports.h = function (selector, properties, children) {\n    if (Array.isArray(properties)) {\n        children = properties;\n        properties = undefined;\n    }\n    var text;\n    // Recognize a common special case where there is only a single text node\n    if (children !== undefined && children.length === 1 && typeof children[0] === 'string') {\n        text = children[0];\n        children = undefined;\n    }\n    else if (children) {\n        flatten(selector, children);\n        if (children.length === 0) {\n            children = undefined;\n        }\n    }\n    return {\n        vnodeSelector: selector,\n        properties: properties,\n        children: children,\n        text: (text === '') ? undefined : text,\n        domNode: null\n    };\n};\n/**\n * Contains simple low-level utility functions to manipulate the real DOM.\n */\nexports.dom = {\n    /**\n     * Creates a real DOM tree from `vnode`. The [[Projection]] object returned will contain the resulting DOM Node in\n     * its [[Projection.domNode|domNode]] property.\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection.\n     * @returns The [[Projection]] which also contains the DOM Node that was created.\n     */\n    create: function (vnode, projectionOptions) {\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n        createDom(vnode, document.createElement('div'), undefined, projectionOptions);\n        return createProjection(vnode, projectionOptions);\n    },\n    /**\n     * Appends a new child node to the DOM which is generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param parentNode - The parent node for the new child node.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n    append: function (parentNode, vnode, projectionOptions) {\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n        createDom(vnode, parentNode, undefined, projectionOptions);\n        return createProjection(vnode, projectionOptions);\n    },\n    /**\n     * Inserts a new DOM node which is generated from a [[VNode]].\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param beforeNode - The node that the DOM Node is inserted before.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function.\n     * NOTE: [[VNode]] objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n    insertBefore: function (beforeNode, vnode, projectionOptions) {\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n        createDom(vnode, beforeNode.parentNode, beforeNode, projectionOptions);\n        return createProjection(vnode, projectionOptions);\n    },\n    /**\n     * Merges a new DOM node which is generated from a [[VNode]] with an existing DOM Node.\n     * This means that the virtual DOM and the real DOM will have one overlapping element.\n     * Therefore the selector for the root [[VNode]] will be ignored, but its properties and children will be applied to the Element provided.\n     * This is a low-level method. Users wil typically use a [[Projector]] instead.\n     * @param element - The existing element to adopt as the root of the new virtual DOM. Existing attributes and child nodes are preserved.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]] objects\n     * may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the projection, see [[createProjector]].\n     * @returns The [[Projection]] that was created.\n     */\n    merge: function (element, vnode, projectionOptions) {\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n        vnode.domNode = element;\n        initPropertiesAndChildren(element, vnode, projectionOptions);\n        return createProjection(vnode, projectionOptions);\n    },\n    /**\n     * Replaces an existing DOM node with a node generated from a [[VNode]].\n     * This is a low-level method. Users will typically use a [[Projector]] instead.\n     * @param element - The node for the [[VNode]] to replace.\n     * @param vnode - The root of the virtual DOM tree that was created using the [[h]] function. NOTE: [[VNode]]\n     * objects may only be rendered once.\n     * @param projectionOptions - Options to be used to create and update the [[Projection]].\n     * @returns The [[Projection]] that was created.\n     */\n    replace: function (element, vnode, projectionOptions) {\n        projectionOptions = applyDefaultProjectionOptions(projectionOptions);\n        createDom(vnode, element.parentNode, element, projectionOptions);\n        element.parentNode.removeChild(element);\n        return createProjection(vnode, projectionOptions);\n    }\n};\n/**\n * Creates a [[CalculationCache]] object, useful for caching [[VNode]] trees.\n * In practice, caching of [[VNode]] trees is not needed, because achieving 60 frames per second is almost never a problem.\n * For more information, see [[CalculationCache]].\n *\n * @param <Result> The type of the value that is cached.\n */\nexports.createCache = function () {\n    var cachedInputs;\n    var cachedOutcome;\n    return {\n        invalidate: function () {\n            cachedOutcome = undefined;\n            cachedInputs = undefined;\n        },\n        result: function (inputs, calculation) {\n            if (cachedInputs) {\n                for (var i = 0; i < inputs.length; i++) {\n                    if (cachedInputs[i] !== inputs[i]) {\n                        cachedOutcome = undefined;\n                    }\n                }\n            }\n            if (!cachedOutcome) {\n                cachedOutcome = calculation();\n                cachedInputs = inputs;\n            }\n            return cachedOutcome;\n        }\n    };\n};\n/**\n * Creates a {@link Mapping} instance that keeps an array of result objects synchronized with an array of source objects.\n * See {@link http://maquettejs.org/docs/arrays.html|Working with arrays}.\n *\n * @param <Source>       The type of source items. A database-record for instance.\n * @param <Target>       The type of target items. A [[Component]] for instance.\n * @param getSourceKey   `function(source)` that must return a key to identify each source object. The result must either be a string or a number.\n * @param createResult   `function(source, index)` that must create a new result object from a given source. This function is identical\n *                       to the `callback` argument in `Array.map(callback)`.\n * @param updateResult   `function(source, target, index)` that updates a result to an updated source.\n */\nexports.createMapping = function (getSourceKey, createResult, updateResult) {\n    var keys = [];\n    var results = [];\n    return {\n        results: results,\n        map: function (newSources) {\n            var newKeys = newSources.map(getSourceKey);\n            var oldTargets = results.slice();\n            var oldIndex = 0;\n            for (var i = 0; i < newSources.length; i++) {\n                var source = newSources[i];\n                var sourceKey = newKeys[i];\n                if (sourceKey === keys[oldIndex]) {\n                    results[i] = oldTargets[oldIndex];\n                    updateResult(source, oldTargets[oldIndex], i);\n                    oldIndex++;\n                }\n                else {\n                    var found = false;\n                    for (var j = 1; j < keys.length + 1; j++) {\n                        var searchIndex = (oldIndex + j) % keys.length;\n                        if (keys[searchIndex] === sourceKey) {\n                            results[i] = oldTargets[searchIndex];\n                            updateResult(newSources[i], oldTargets[searchIndex], i);\n                            oldIndex = searchIndex + 1;\n                            found = true;\n                            break;\n                        }\n                    }\n                    if (!found) {\n                        results[i] = createResult(source, i);\n                    }\n                }\n            }\n            results.length = newSources.length;\n            keys = newKeys;\n        }\n    };\n};\n/**\n * Creates a [[Projector]] instance using the provided projectionOptions.\n *\n * For more information, see [[Projector]].\n *\n * @param projectorOptions   Options that influence how the DOM is rendered and updated.\n */\nexports.createProjector = function (projectorOptions) {\n    var projector;\n    var projectionOptions = applyDefaultProjectionOptions(projectorOptions);\n    projectionOptions.eventHandlerInterceptor = function (propertyName, eventHandler, domNode, properties) {\n        return function () {\n            // intercept function calls (event handlers) to do a render afterwards.\n            projector.scheduleRender();\n            return eventHandler.apply(properties.bind || this, arguments);\n        };\n    };\n    var renderCompleted = true;\n    var scheduled;\n    var stopped = false;\n    var projections = [];\n    var renderFunctions = []; // matches the projections array\n    var doRender = function () {\n        scheduled = undefined;\n        if (!renderCompleted) {\n            return; // The last render threw an error, it should be logged in the browser console.\n        }\n        renderCompleted = false;\n        for (var i = 0; i < projections.length; i++) {\n            var updatedVnode = renderFunctions[i]();\n            projections[i].update(updatedVnode);\n        }\n        renderCompleted = true;\n    };\n    projector = {\n        renderNow: doRender,\n        scheduleRender: function () {\n            if (!scheduled && !stopped) {\n                scheduled = requestAnimationFrame(doRender);\n            }\n        },\n        stop: function () {\n            if (scheduled) {\n                cancelAnimationFrame(scheduled);\n                scheduled = undefined;\n            }\n            stopped = true;\n        },\n        resume: function () {\n            stopped = false;\n            renderCompleted = true;\n            projector.scheduleRender();\n        },\n        append: function (parentNode, renderMaquetteFunction) {\n            projections.push(exports.dom.append(parentNode, renderMaquetteFunction(), projectionOptions));\n            renderFunctions.push(renderMaquetteFunction);\n        },\n        insertBefore: function (beforeNode, renderMaquetteFunction) {\n            projections.push(exports.dom.insertBefore(beforeNode, renderMaquetteFunction(), projectionOptions));\n            renderFunctions.push(renderMaquetteFunction);\n        },\n        merge: function (domNode, renderMaquetteFunction) {\n            projections.push(exports.dom.merge(domNode, renderMaquetteFunction(), projectionOptions));\n            renderFunctions.push(renderMaquetteFunction);\n        },\n        replace: function (domNode, renderMaquetteFunction) {\n            projections.push(exports.dom.replace(domNode, renderMaquetteFunction(), projectionOptions));\n            renderFunctions.push(renderMaquetteFunction);\n        },\n        detach: function (renderMaquetteFunction) {\n            for (var i = 0; i < renderFunctions.length; i++) {\n                if (renderFunctions[i] === renderMaquetteFunction) {\n                    renderFunctions.splice(i, 1);\n                    return projections.splice(i, 1)[0];\n                }\n            }\n            throw new Error('renderMaquetteFunction was not found');\n        }\n    };\n    return projector;\n};\n\n//# sourceMappingURL=maquette.js.map\n"]}